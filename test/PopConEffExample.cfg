process ProcessOne = {
 service = MessageLogger {
    untracked vstring destinations = { "cout" }
          untracked PSet cout = { untracked string threshold = 
#"ERROR" 
# or switch to
"INFO" 
} 
}	



//Subproject specific modules
     source = EmptyIOVSource {
         string timetype = "runnumber"
         uint64 firstValue = 1
         uint64 lastValue = 1
         uint64 interval = 1
       }


//PopCon config
include "CondCore/DBCommon/data/CondDBCommon.cfi"
// eg to write the objects in sqlite

replace CondDBCommon.connect = "sqlite_file:pop_test.db"

// Database output service
    service = PoolDBOutputService{
	using CondDBCommon
        untracked string timetype="runnumber"
        # here "record" stands for "Pool container"
        # it is just a convention to keep the same name as the EventSetup record
        # in this case the convention clearly does not hold
	VPSet toPut = { { string record = "ParamEffEtaRcd" string tag = "Example_tag1" },
                        { string record = "ParamEffPtRcd" string tag = "Example_tag1" } }
	untracked string logconnect = "sqlite_file:log.db"
   }



module Test1 = ExPopConEfficiency {
   string record = "ParamEffPtRcd"
   untracked bool loggingOn = True
   untracked bool IsDestDbCheckedInQueryLog = True
   bool SinceAppendMode = true
   PSet Source ={untracked uint64 since = 200
                 untracked string type = "Pt"
                 untracked vdouble params = {0.1, 0.95,  1.0, 5.5 } 
                }
}


module Test2 = ExPopConEfficiency {
   string record = "ParamEffEtaRcd"
   untracked bool loggingOn = True
   untracked bool IsDestDbCheckedInQueryLog = True // if true, look at log 
   bool SinceAppendMode = true
   PSet Source ={untracked uint64 since = 351
                 untracked string type = "Eta"   
                 untracked vdouble params = { 0.85, 0.0, 0.9, 2.3}
                }
}

module Test3 = ExPopConEfficiency {
   string record = "ParamEffEtaRcd"
   untracked bool loggingOn = True
   untracked bool IsDestDbCheckedInQueryLog = True // if true, look at log 
   bool SinceAppendMode = true
   PSet Source ={untracked uint64 since = 531
                 untracked string type = "Eta"   
                 untracked vdouble params = { 0.92, 0.0, 0.8, 2.5}
                }
}

module Test4 = ExPopConEfficiency {

   string record = "ParamEffPtRcd"
   untracked bool loggingOn = True
   untracked bool IsDestDbCheckedInQueryLog = True // if true, look at log 
   bool SinceAppendMode = true
   PSet Source ={untracked uint64 since = 701
                 untracked string type = "Pt"
                 untracked vdouble params = {0.1, 0.95,  1.0, 9.5 } 
                }
}


# does not work
# path p = {Test1, Test2, Test3, Test4}

path p = {TestN}

}

